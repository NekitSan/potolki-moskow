class Webp{eventsAttach(){this.testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}))}testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}init(){this.eventsAttach()}}const WEBP_TRUE=new Webp;WEBP_TRUE.init(),$(document).ready((function(){const e=document.querySelector("#pop_up"),t=e.querySelector(".pop_up__stages").children,n=t.length,o=document.querySelector(".pop_up__button"),s=e.querySelector(".button--left"),l=e.querySelector(".button--next"),c=e.querySelector(".completed__button"),i=e.querySelector(".close");function a(e,t){6==e&&(document.querySelector("#pop_up .close").classList.add("hidden"),document.querySelector(".pop_up__control").classList.add("hidden"),s.classList.add("hidden"),console.log(t))}function d(e){t[e].classList.add("hidden"),t[e+1].classList.remove("hidden"),s.classList.remove("hidden")}function r(e){let t=[];for(let n=0;n<e.length;n++)e[n].checked&&t.push(e[n].value);return t}function p(e){return e.value}function u(t){let n={};switch(t){case 0:n.zona=r(stage_1.elements.zona);break;case 1:n.size=p(stage_2.elements.size);break;case 2:n.view=r(stage_3.elements.view);break;case 3:n.material=r(stage_4.elements.material);break;case 4:n.extra=r(stage_5.elements.extra);break;case 5:n.bonus=r(stage_6.elements.bonus);break;case 6:0!=e.querySelector(".pop_up__networks__pointer").children.length?n.scnetw=p(stage_data.elements["soc-network"]):n.phone=p(stage_data.elements.userphone),n.name=p(stage_data.elements.username)}return n}function _(e){$(e).addClass("wiggle"),setTimeout(()=>{$(e).removeClass("wiggle")},500)}function h(t){e.classList.contains("fixed")?(t.classList.add("overflow--scroll-y"),t.scrollTop=0):(t.classList.remove("overflow--scroll-y"),e.scrollIntoView())}s.addEventListener("click",()=>{for(let o=0;o<n;o++)t[o].classList.contains("hidden")||o<=6&&(0!=o&&(h(e),t[o].classList.add("hidden"),t[o-1].classList.remove("hidden")),1==o&&s.classList.add("hidden"))}),l.addEventListener("click",o=>{let l=[];for(let o=0;o<n;o++){let n=u(o);if(l.push(n),!t[o].classList.contains("hidden")){h(e);let n=t[o].elements[0].getAttribute("name");"size"==n||"username"==n?""!=p(t[o].elements[n])?o<=6&&(0==e.querySelector(".pop_up__networks__pointer").children.length&&"size"==n||0==e.querySelector(".pop_up__networks__pointer").children.length&&""!=t[o].elements.username.value&&""!=t[o].elements.userphone.value||0!=e.querySelector(".pop_up__networks__pointer").children.length&&""!=t[o].elements["soc-network"].value?(d(o),a(o,l)):_(t[o])):_(t[o]):0!=r(t[o].elements[n]).length?o<6&&(d(o),s.classList.remove("hidden")):_(t[o]);break}}}),c.addEventListener("click",()=>{document.body.classList.remove("unscroll"),e.classList.remove("fixed"),document.querySelector(".testing").classList.add("hidden"),e.querySelector("#stage_completed").classList.add("hidden"),document.querySelector(".pop_up__button--text").innerHTML="Изменить тест",t[0].classList.remove("hidden"),document.querySelector("#pop_up .close").classList.remove("hidden"),document.querySelector(".pop_up__control").classList.remove("hidden")}),o.addEventListener("click",()=>{document.querySelector(".testing").classList.remove("hidden"),document.querySelector("#pop_up .close").classList.remove("hidden"),e.classList.add("fixed"),document.body.classList.add("unscroll"),h(e)}),i.addEventListener("click",()=>{e.classList.remove("fixed"),document.body.classList.remove("unscroll"),document.querySelector("#pop_up .close").classList.add("hidden")}),$("#stage_6 input:checkbox").click((function(){$(this).is(":checked")&&$("#stage_6 input:checkbox").not(this).prop("checked",!1)})),$(".button--add_dontkinow").click((function(){$("#sizeArea").val($(this).html())}));const m={phone__return:{tile:"Нужна помощь специалиста?",text:"Оставьте свой номер и Вам в течении нескольких минут перезвонит консультант. Он ответит на все вопросы о нашей продукции"},phone__measurer:{tile:"Вызвать замерщика‍",text:"Перезвоним через 5 минут, чтобы уточнить удобное для вас время замера"}},v=Object.keys(m);$("#phone__measurer").click((function(){for(let e=0;e<v.length;e++)$(this).attr("id")==v[e]&&($("#pop_up__phone--call_tile").text(m[v[e]].tile),$("#pop_up__phone--call_text").text(m[v[e]].text));$(".pop_up__phone--call").removeClass("hidden"),$(".pop_up__phone--call .close").removeClass("hidden"),$("body").addClass("unscroll")})),$("#phone__return").click((function(){for(let e=0;e<v.length;e++)$(this).attr("id")==v[e]&&($("#pop_up__phone--call_tile").text(m[v[e]].tile),$("#pop_up__phone--call_text").text(m[v[e]].text));$(".pop_up__phone--call").removeClass("hidden"),$(".pop_up__phone--call .close").removeClass("hidden"),$("body").addClass("unscroll")})),$(".whats .extra__button").click((function(){for(let e=0;e<v.length;e++)$(this).data("id")==v[e]&&($("#pop_up__phone--call_tile").text(m[v[e]].tile),$("#pop_up__phone--call_text").text(m[v[e]].text));$(".pop_up__phone--call").removeClass("hidden"),$(".pop_up__phone--call .close").removeClass("hidden"),$("body").addClass("unscroll")})),$(".pop_up__phone--call .pop_up__button").click((function(e){return e.preventDefault(),0!=$("#masseg input[name='phoneUsername']").val().length&&0!=$("#masseg input[name='phoneUserphone']").val().length?(console.log($("#masseg input[name='phoneUsername']").val()),console.log($("#masseg input[name='phoneUserphone']").val()),$("body").removeClass("unscroll"),$(".pop_up__phone--call").addClass("hidden"),$(".pop_up__phone--call .close").addClass("hidden")):alert("Заполните обязательные поля!"),!1})),$(".pop_up__phone--call .close").click((function(){$(".pop_up__phone--call").addClass("hidden"),$("body").removeClass("unscroll"),$(this).addClass("hidden")}));document.querySelector(".pop_up__networks__plus");const k={vk:'<input type="text" name="soc-network" placeholder="id профиля">',inst:'<input type="text" name="soc-network" placeholder="@id профиля">',ok:'<input type="text" name="soc-network" placeholder="Ссылка на профиль">',faceb:'<input type="text" name="soc-network" placeholder="id профиля">',tel:'<input type="text" name="soc-network" placeholder="@id профиля">'},g=Object.keys(k);$("#container__netw input:checkbox").click((function(){$(this).is(":checked")&&$("#container__netw input:checkbox").not(this).prop("checked",!1);for(let e=0;e<g.length;e++)if($(this).attr("id")==g[e]){let t=$(this).siblings(".soc-network__icon");$(".pop_up__networks__pointer").html(k[g[e]]+'<div id="netw--delete"></div>'),$(t).clone().appendTo(".pop_up__networks__pointer")}$("#required--phone").addClass("hidden")})),$("#stage_data").mouseover((function(){$("#netw--delete")&&$("#netw--delete").click((function(){$("#required--phone").removeClass("hidden"),$(".pop_up__networks__pointer").empty()}))})),function(){let e=document.querySelector(".reviews__container").children;for(let t=0;t<e.length;t++)for(let n=0;n<$(e[t].children[2]).attr("value");n++)$($(e[t].children[2]).children()[n]).addClass("active")}()}));